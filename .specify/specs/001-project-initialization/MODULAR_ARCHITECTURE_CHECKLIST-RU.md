# Контрольный список проверки модульной архитектуры

**Функция**: 001-project-initialization  
**Дата**: 2025-11-17  
**Цель**: Обеспечить АБСОЛЮТНОЕ соответствие обязательным требованиям модульной архитектуры

## Проверка критических требований

Этот контрольный список ДОЛЖЕН быть проверен до того, как любая реализация будет считаться завершенной. Несоответствие любому пункту является БЛОКЕРОМ, который препятствует принятию.

### ✅ Основные требования модульной архитектуры

- [ ] **ВЕСЬ функционал находится в packages/** - Нулевой код функций вне директории packages/
  - [ ] Нет директории src/ в корне репозитория
  - [ ] Нет директории lib/ в корне репозитория
  - [ ] Нет директории components/ в корне репозитория
  - [ ] Нет директории api/ в корне репозитория
  - [ ] Нет директории models/ в корне репозитория
  - [ ] Нет директории utils/ в корне репозитория (за исключением packages/utils/)
  
- [ ] **Файлы корневого уровня ТОЛЬКО конфигурация и документация**
  - [ ] package.json (только конфигурация workspace)
  - [ ] pnpm-workspace.yaml
  - [ ] turbo.json (оркестрация сборки)
  - [ ] tsconfig.json (корневая конфигурация TypeScript)
  - [ ] README.md и README-RU.md
  - [ ] LICENSE
  - [ ] .gitignore
  - [ ] Конфигурации ESLint, Prettier
  - [ ] Директория .github/ (workflows, templates)

### ✅ Требования к структуре пакетов

- [ ] **Директория packages/ существует** и является ЕДИНСТВЕННЫМ местом для кода функций
- [ ] **Каждый пакет следует соглашению об именовании**:
  - [ ] Пакеты фронтенда заканчиваются на `-frt` (например, `packages/clusters-frt/`)
  - [ ] Пакеты бэкенда заканчиваются на `-srv` (например, `packages/clusters-srv/`)
  - [ ] Общие пакеты не имеют суффикса (например, `packages/types/`, `packages/utils/`)
  
- [ ] **Каждый пакет имеет поддиректорию base/**:
  - [ ] Реализация находится в `packages/{name}/base/src/` НЕ `packages/{name}/src/`
  - [ ] Файлы конфигурации находятся в `packages/{name}/base/` (package.json, tsconfig.json и т.д.)
  
- [ ] **Фронтенд и бэкенд разделены**:
  - [ ] Ни один пакет не содержит одновременно код фронтенда и бэкенда
  - [ ] Функция, требующая обоих, имеет ДВА пакета: `{feature}-frt` и `{feature}-srv`

### ✅ Именование и область видимости пакетов

- [ ] **Все пакеты используют область @universo/** в package.json:
  - [ ] `"name": "@universo/clusters-frt"` НЕ `"name": "clusters-frt"`
  - [ ] `"name": "@universo/types"` НЕ `"name": "types"`
  
- [ ] **Имена пакетов следуют соглашению kebab-case**:
  - [ ] Пример: `@universo/api-client` (правильно)
  - [ ] НЕ: `@universo/apiClient` или `@universo/ApiClient`

### ✅ Изучение эталонной реализации

- [ ] **universo-platformo-react был изучен**:
  - [ ] Просмотрена организация пакетов в https://github.com/teknokomo/universo-platformo-react
  - [ ] Понят паттерн общих пакетов (types, utils, i18n, api-client)
  - [ ] Понят паттерн пакетов функций (разделение frontend/backend)
  - [ ] Отмечено, как используются директории base/
  - [ ] Адаптированы паттерны к Vue/Django (не скопированы напрямую React/Express)

### ✅ Конфигурация workspace

- [ ] **pnpm-workspace.yaml правильно настроен**:
  - [ ] Включает паттерн `packages/*`
  - [ ] Включает паттерн `packages/*/base`
  - [ ] Определена секция catalog для общих зависимостей
  
- [ ] **Корневой package.json только корень workspace**:
  - [ ] НЕ содержит зависимостей бизнес-логики
  - [ ] Содержит ТОЛЬКО инструменты управления workspace и сборки
  - [ ] Имеет скрипты workspace для сборки/тестирования всех пакетов

### ✅ Оркестрация сборки

- [ ] **turbo.json (или эквивалент) настроен**:
  - [ ] Определён конвейер сборки с зависимостями задач
  - [ ] Конфигурация кэша для детерминированных задач
  - [ ] Параллельное выполнение, где возможно
  
- [ ] **Каждый пакет имеет скрипты сборки**:
  - [ ] Определены скрипты `build`, `dev`, `test`, `lint`
  - [ ] Скрипты согласованы между пакетами

### ✅ Общие пакеты

- [ ] **Существуют необходимые общие пакеты**:
  - [ ] `packages/types/base/` - Определения типов TypeScript
  - [ ] `packages/utils/base/` - Общие утилитарные функции
  - [ ] `packages/i18n/base/` - Централизованный экземпляр i18n
  - [ ] `packages/api-client/base/` - Типобезопасный API-клиент
  - [ ] `packages/template-vue/base/` - Общие UI-компоненты
  
- [ ] **Общие пакеты правильно экспортируют**:
  - [ ] Каждый имеет index.ts с чётким публичным API
  - [ ] Типы правильно экспортированы
  - [ ] Нет циклических зависимостей между общими пакетами

### ✅ Требования к документации

- [ ] **Конституция обновлена** (v1.3.0+):
  - [ ] Усилена секция модульной архитектуры
  - [ ] Добавлена секция запрещённых практик
  - [ ] Указано требование эталонной реализации
  
- [ ] **Спецификация обновлена**:
  - [ ] Добавлены требования FR-000-MODULAR
  - [ ] Секция пояснений включает акцент на модульности
  - [ ] Граничные случаи касаются модульных проблем
  
- [ ] **Файлы README объясняют структуру пакетов**:
  - [ ] Как создавать новые пакеты
  - [ ] Как организованы пакеты
  - [ ] Почему модульная архитектура обязательна

### ✅ Запрещённые практики - Отсутствуют

- [ ] **НЕТ немодульной реализации**:
  - [ ] Нет кода функций в директориях корневого уровня
  - [ ] Нет смешанных пакетов frontend/backend
  - [ ] Нет пакетов без директории base/
  
- [ ] **НЕТ пропущенного изучения эталона**:
  - [ ] Просмотрены паттерны universo-platformo-react
  - [ ] Адаптации к Vue/Django задокументированы
  
- [ ] **НЕТ исключений без обоснования**:
  - [ ] Любое отклонение от модульной архитектуры имеет явное одобрение
  - [ ] Обоснование задокументировано в ADR (запись архитектурного решения)

## Процесс проверки

1. **Самопроверка**: Разработчик проверяет все пункты перед отправкой PR
2. **Проверка кода**: Рецензент проверяет все пункты во время проверки PR
3. **Соответствие конституции**: PR должен пройти проверку соответствия конституции
4. **Автоматические проверки**: CI/CD проверяет структуру пакетов (если настроено)

## Последствия несоответствия

**Если ЛЮБОЙ пункт не отмечен или не проходит проверку:**
- ❌ PR БЛОКИРУЕТСЯ и не может быть объединён
- ❌ Реализация должна быть отрефакторена до соответствия
- ❌ Исключения не предоставляются без явного одобрения команды архитектуры

## Подпись

**Разработчик**: Я подтверждаю, что проверил все пункты в этом контрольном списке.
- Имя: _______________
- Дата: _______________
- Подпись: _______________

**Рецензент**: Я проверил, что все пункты в этом контрольном списке соответствуют требованиям.
- Имя: _______________
- Дата: _______________
- Подпись: _______________

---

**Версия**: 1.0.0  
**Последнее обновление**: 2025-11-17  
**Связанные документы**: 
- `.specify/memory/constitution.md` (v1.3.0+)
- `specs/001-project-initialization/spec.md` (требования FR-000-MODULAR)
- `specs/001-project-initialization/plan.md` (секция проверки конституции)
